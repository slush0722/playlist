<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Playlist</title>
  <style>
    @font-face {
      font-family: 'ì—¬ê¸°ì–´ë•Œ ì˜ë‚œì²´ 2';
      src: url('fonts/Jalnan2.otf') format('opentype');
    }

    @font-face {
      font-family: 'Maplestory';
      src: url('fonts/Maplestory-Light.ttf') format('truetype');
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Maplestory', sans-serif;
      background: url('background.png') no-repeat center center fixed;
      background-size: cover;
      box-sizing: border-box;

      transition: background-image 0.6s ease-in-out, background-color 0.6s ease-in-out;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 20px solid rgba(255, 255, 255, 0.2);
      box-sizing: border-box;
      pointer-events: none;
      z-index: 1;
    }

    .header {
      text-align: center;
      padding: 60px 0 10px;
      z-index: 2;
      position: relative;
    }

    .header h1 {
      font-family: 'ì—¬ê¸°ì–´ë•Œ ì˜ë‚œì²´ 2', sans-serif;
      font-size: 40px;
      color: #AEE2FF;
      margin: 0;
    }

    .main-container {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      padding: 10px 50px; /* ìœ„ íŒ¨ë”© 20px â†’ 10pxë¡œ ì¤„ì„ */
      margin-top: -75px;   /* ì¶”ê°€ë¡œ ì•½ê°„ ìœ„ë¡œ ë‹¹ê¸°ê¸° */
      z-index: 2;
      position: relative;
    }

    .icon-column-wrapper {
      border: 4px solid #333333;
      padding: 20px;
      border-radius: 12px;
      background-color: #1f1f1f;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .icon-title-bar {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin-bottom: 15px;
    }

    .icon-title {
      font-family: 'ì—¬ê¸°ì–´ë•Œ ì˜ë‚œì²´ 2', sans-serif;
      font-size: 24px;
      color: #ffffff;
    }

    .arrow-button {
      background: none;
      border: none;
      font-size: 24px;
      color: white;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    
    .arrow-button:hover {
      transform: scale(1.3);
    }
    
    /* í´ë¦­ ë˜ëŠ” í‚¤ë³´ë“œ í¬ì»¤ìŠ¤ ì‹œì—ë„ í…Œë‘ë¦¬ ë³€í™” ì—†ìŒ */
    .arrow-button:focus,
    .arrow-button:active {
      outline: none;
      box-shadow: none;
      border: none;
    }

    .icon-item {
      display: flex;
      align-items: center;
      gap: 10px;
      border: 2px solid #333;
      border-radius: 12px;
      background: #1f1f1f;
      padding: 8px 10px;
      width: 100%;
      height: 80px; /* âœ… ë†’ì´ ê³ ì • */
      box-sizing: border-box;
    }
    
    .playButton {
      width: 60px; /* âœ… ì´ë¯¸ì§€ í¬ê¸° ì¡°ì • */
      height: 60px;
      object-fit: cover;
      border-radius: 8px;
      background-color: #555;
      cursor: pointer;
      border: 2px solid #444;
    }

    .playlist-column {
      display: flex;
      flex-direction: column;
      gap: 10px; /* ê¸°ì¡´ë³´ë‹¤ ë„‰ë„‰í•œ ê°„ê²©ìœ¼ë¡œ ì¦ê°€ */
      transform: translateY(-50px);
    
      border: 4px solid #333333;
      padding: 30px; /* ë‚´ë¶€ íŒ¨ë”©ë„ ì—¬ìœ  ìˆê²Œ */
      border-radius: 12px;
      background-color: #1f1f1f;
    }    

    iframe {
      border-radius: 12px;
      width: 300px;
      height: 152px;
    }

    .volume-control {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 999;
      font-family: 'Maplestory', sans-serif;
      font-weight: bold;
      background-color: rgba(0, 0, 0, 0.7);
      padding: 8px 14px;
      border-radius: 10px;
      color: white; /* ìš”ê±° ì¶”ê°€ */
    }
    #volumeSlider {
      width: 120px;
    }
    
    .playButton:hover {
      transform: scale(1.1); /* ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ 20% ì»¤ì§ */
    }
    
    iframe {
      border-radius: 12px;
      width: 300px;
      height: 152px;
      transition: transform 0.2s ease; /* ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ */
    }
    
    iframe:hover {
      transform: scale(1.05); /* ì‚´ì§ ì»¤ì§ */
    }

    #volumeSlider {
      width: 120px;
      transition: transform 0.2s ease;
    }
    
    #volumeSlider:hover {
      transform: scale(1.05);
    }

    /* Playlist ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
    .header h1 {
      transition: transform 0.3s ease;
      display: inline-block; /* transform ì ìš©ì„ ìì—°ìŠ¤ëŸ½ê²Œ ë§Œë“¤ê¸° ìœ„í•´ */
    }
    
    .header:hover h1 {
      transform: scale(1.2); /* ì›í•˜ëŠ” ë¹„ìœ¨ë¡œ ì»¤ì§€ê²Œ ì¡°ì ˆ */
    }

    .time-box {
      font-family: 'Maplestory', sans-serif;
      font-weight: bold;
      font-size: 24px;
      text-align: center;
      margin-top: 10px;
      color: #ffffff;
      
      max-width: 90%; /* í™”ë©´ ë„ˆë¬´ ì•ˆ ë„˜ì¹˜ê²Œ ì œí•œ */
      width: fit-content; /* ë‚´ìš©ì— ë§ëŠ” ë„ˆë¹„ */
      height: 40px;
      opacity: 0;
      transform: translateY(-10px);
      transition: opacity 0.5s ease, transform 0.5s ease;
      pointer-events: none;
      display: flex;
      justify-content: center;
      align-items: center;
    
      background-color: rgba(0, 0, 0, 0.6);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 12px;
      padding: 0 12px;
    
      margin-left: auto;
      margin-right: auto; /* ì¤‘ì•™ ì •ë ¬ */
    }
    

    /* í™œì„±í™” ìƒíƒœ (ì‹œê°„ í‘œì‹œ) */
    .time-box.active {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden; /* ìŠ¤í¬ë¡¤ ì™„ì „ ì œê±° */
      height: 100%;
    }

    #time-box {
      position: fixed;
      bottom: 150px; /* volume-controlì´ bottom: 20pxì´ë¯€ë¡œ ìœ„ë¡œ 60px ë„ì›€ */
      left: 50%;
      transform: translateX(-50%);
      z-index: 999;
    
      font-family: 'Maplestory', sans-serif;
      font-weight: bold;
      font-size: 16px;
      text-align: center;
    
      background-color: rgba(0, 0, 0, 0.6);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 12px;
      padding: 0 12px;
      height: 40px;
    
      max-width: 90%;
      width: fit-content;
      color: #aaa;
    
      opacity: 0;
      pointer-events: none;
      display: flex;
      justify-content: center;
      align-items: center;
    
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    
    #time-box.active {
      opacity: 1;
      transform: translate(-50%, 0);
    }
    
    #volumeControl {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    #volumeSlider {
      width: 150px;
    }
    
    .controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .audio-controls {
      position: fixed;
      bottom: 80px; /* ë³¼ë¥¨ ë°”ë³´ë‹¤ ìœ„ì— ìœ„ì¹˜í•˜ë„ë¡ ì¡°ì • */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 15px;
      z-index: 1000;
      
      background-color: rgba(0, 0, 0, 0.7);
      padding: 10px 16px;
      border-radius: 12px;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }
    
    .audio-controls button {
      font-size: 20px;
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    
    .audio-controls button:hover {
      transform: scale(1.2);
    }

    .track-info-bar {
      position: fixed;;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(255, 255, 255, 0.95);
      padding: 12px 24px;
      color: #111;
      font-size: 18px;
      font-weight: bold;
      border-radius: 12px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease, transform 0.4s ease;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
      z-index: 9999;
    }
    
    .track-info-bar.active {
      opacity: 1;
      pointer-events: auto;
      transform: translateX(-50%) translateY(20px);
    }
    
    .hideable {
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    
    /* fade íš¨ê³¼ */
    .fade-in {
      opacity: 1;
      transform: translateX(0) translateY(0); /* yì¶• ì´ë™ ì œê±° */
      pointer-events: auto;
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    
    .fade-out {
      opacity: 0;
      pointer-events: none;
      transform: translateX(0) translateY(0); /* yì¶• ì´ë™ ì œê±° */
      transition: opacity 0.5s ease, transform 0.5s ease;
    }

    /* ì™„ì „íˆ ìˆ¨ê¹€ (ì• ë‹ˆë©”ì´ì…˜ í›„ ì ìš©) */
    .hidden {
      display: none !important;
    }

    /* ì•„ì´ì½˜ ì™¼ìª½ìœ¼ë¡œ ì‚¬ë¼ì§ˆ ë•Œ */
    .main-container.fade-out {
      transform: translateX(-50px);
    }

    /* í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì‚¬ë¼ì§ˆ ë•Œ */
    .playlist-column.fade-out {
      transform: translateX(50px);
    }

    /* playlist-column ì´ë™ */
    .playlist-column.fade-out {
      transform: translateX(50px);
    }
    .playlist-column.fade-in {
      transform: translateX(0);
    }

    #rotatingWrapper {
      position: fixed;
      top: 45%;
      left: 50%;
      transform: translate(-50%, -50%);
      transform-origin: center center;
      width: 200px;
      height: 200px;
      display: none;
      z-index: 9999;
      transition: transform 0.3s ease;
    }
    
    #rotatingIcon {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.4), inset 0 0 10px rgba(255, 255, 255, 0.2);
      border: 10px solid #111;
      background-color: #222;
      object-fit: cover;
    
      /* ì´ˆê¸°ì—ëŠ” transform ì—†ìŒ */
    }
    
    .rotating {
      animation: spin 5s linear infinite;
      animation-play-state: running;
    }
    
    .paused {
      animation-play-state: paused !important;
    }
    
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }
    
    #rotatingWrapper:hover {
      transform: translate(-50%, -50%) scale(1.1);
    }

    /* ì¬ìƒ ì¤‘ ë°” ê¸°ë³¸ ìƒíƒœ */
    #trackInfoBar {
      position: fixed;
      top: calc(50% + 120px); /* ëŒì•„ê°€ëŠ” ì´ë¯¸ì§€ ì•„ë˜ë¡œ */
      left: 50%;
      transform: translateX(-50%) translateY(-20px);
      background-color: rgba(0, 0, 0, 0.75);
      padding: 10px 20px;
      color: white;
      font-size: 18px;
      border-radius: 8px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease, transform 0.3s ease;
      z-index: 9999;
    }

    /* í™œì„±í™” ì‹œ ë‚˜íƒ€ë‚¨ */
    #trackInfoBar.active {
      opacity: 1;
      pointer-events: auto;
      transform: translateX(-50%) translateY(0);
    }

    @keyframes rollIn {
      0% {
        transform: translateX(-150%) translateY(-50%) rotate(-180deg);
        opacity: 0;
      }
      100% {
        transform: translateX(-50%) translateY(-50%) rotate(0deg);
        opacity: 1;
      }
    }
    
    #rotatingWrapper.rolling-in {
      animation: rollIn 1.2s ease-out forwards;
    }

    .audio-controls button {
      font-size: 20px;
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      transition: transform 0.2s ease;
      padding: 8px 10px; /* ë²„íŠ¼ í¬ê¸° ì‚´ì§ í†µì¼ */
    }
    
    .audio-controls button:hover {
      transform: scale(1.2);
    }

    #toggleViewBtn {
      font-size: 20px;
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      transition: transform 0.2s ease;
      padding: 8px 10px; /* ë²„íŠ¼ í¬ê¸° ì‚´ì§ í†µì¼ */
    }
    
    #toggleViewBtn:hover {
      transform: scale(1.2);
    }

    #bottomLeftContainer {
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    #toggleInfoBtn {
      font-size: 24px;
      background-color: rgba(0, 0, 0, 0.6);
      border: 2px solid rgba(255, 255, 255, 0.4);
      border-radius: 8px;
      color: white;
      cursor: pointer;
      padding: 8px 10px;
      transition: transform 0.2s ease; /* âœ… ì»¤ì§€ëŠ” ì• ë‹ˆë©”ì´ì…˜ ìœ ì§€ */
    }
  
    /* âœ… hover ì‹œ ì»¤ì§€ê¸°ë§Œ í•˜ê³ , ìƒ‰ì€ ë³€í™” ì—†ìŒ */
    #toggleInfoBtn:hover {
      transform: scale(1.2);
      background-color: rgba(0, 0, 0, 0.6);
      border: 2px solid rgba(255, 255, 255, 0.4);
      color: white;
    }
  
    #siteInfo {
      position: absolute;
      bottom: 50px; /* ğŸ”¥ ë²„íŠ¼ ë°”ë¡œ ìœ„ì— */
      left: 50%;
      transform: translateX(-50%);
      margin-bottom: 10px;
      padding: 8px 16px;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      font-size: 14px;
      border-radius: 8px;
      text-align: center;
      opacity: 0;
      pointer-events: none;
      border: 2px solid rgba(255, 255, 255, 0.4);
      transition: opacity 0.4s ease, transform 0.4s ease;
      display: block; /* âœ… ê¸°ë³¸ displayëŠ” blockìœ¼ë¡œ ìˆ˜ì •! */
      z-index: 9999;
    }
  
    /* activeì¼ ë•ŒëŠ” opacityë§Œ ì¡°ì ˆ */
    #siteInfo.active {
      opacity: 1;
      pointer-events: auto;
      transform: translate(-50%, 0);
    }

    .icon-item {
      display: flex;
      align-items: center;
      gap: 12px;
      border: 2px solid #333;
      border-radius: 12px;
      background: #1f1f1f;
      padding: 10px;
      margin-bottom: 12px;
      cursor: pointer;
      width: 100%;
      box-sizing: border-box;
    }
    
    .icon-item:hover {
      background: #333333;
    }
    
    .text-info {
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    
    .song-title {
      font-weight: bold;
      color: #ffffff;
      font-size: 16px;
    }
    
    .song-artist {
      font-weight: normal;
      color: #bbbbbb;
      font-size: 13px;
    }

    .icon-grid {
      display: flex;
      flex-direction: column;
      overflow-y: auto; /* âœ… ì„¸ë¡œ ìŠ¤í¬ë¡¤ */
      max-height: 550px; /* âœ… ì›í•˜ëŠ” ë†’ì´ ì œí•œ */
      padding: 10px;
      width: 280px; /* âœ… ê³ ì • ë„ˆë¹„ ì„¤ì • */
      box-sizing: border-box;
    }

    .background-thumbs {
      display: flex;
      flex-direction: row;       /* ğŸ‘‰ ìˆ˜í‰ ì •ë ¬ */
      gap: 10px;
      margin-left: 10px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease, transform 0.4s ease;
      position: absolute;
      top: 0;
      left: 100%; /* ë²„íŠ¼ ì˜¤ë¥¸ìª½ì— ë¶™ê²Œ */
      transform: translateX(10px); /* ì•½ê°„ì˜ ê±°ë¦¬ ì£¼ê¸° */
    }
    
    .background-thumbs.active {
      opacity: 1;
      pointer-events: auto;
    }
    
    .bg-thumb {
      width: 50px;
      height: 50px;
      border: 2px solid #aaaaaa;
      border-radius: 6px;
      object-fit: cover;
      cursor: pointer;
      transition: transform 0.3s;
      animation: slideInRight 0.4s ease forwards;
      opacity: 0;
    }
    .bg-thumb.selected {
      border: 3px solid rgb(0, 123, 255); /* ì„ íƒëœ ë°°ê²½ ê°•ì¡° */
    }
    
    .bg-thumb:hover {
      transform: scale(1.1);
    }

    @keyframes slideInRight {
      0% {
        transform: translateX(-20px);
        opacity: 0;
      }
      100% {
        transform: translateX(0px);
        opacity: 1;
      }
    }
    
    /* ì¸ë„¤ì¼ì´ ë³´ì¼ ë•Œ ìˆœì°¨ì  delay */
    .background-thumbs.active .bg-thumb:nth-child(1) { animation-delay: 0s; }
    .background-thumbs.active .bg-thumb:nth-child(2) { animation-delay: 0.1s; }
    .background-thumbs.active .bg-thumb:nth-child(3) { animation-delay: 0.2s; }
    .background-thumbs.active .bg-thumb:nth-child(4) { animation-delay: 0.3s; }
    .background-thumbs.active .bg-thumb:nth-child(5) { animation-delay: 0.4s; }

    #bgOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center center; /* ì´ˆê¸° ìœ„ì¹˜ */
      z-index: -1;
      opacity: 0;
      transition: opacity 0.6s ease;
      pointer-events: none;
    }    

  </style>
</head>
<body>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- ì œëª© ì˜ì—­ -->
  <div class="header">
    <h1 id="playlist-title">Playlist</h1> <!-- ìƒë‹¨ íƒ€ì´í‹€ í…ìŠ¤íŠ¸ -->
  </div>

  <div class="hideable">
    <!-- ì¬ìƒ ì‹œê°„ í‘œì‹œ ì˜ì—­ -->
    <div id="time-box" class="time-box"> </div>
    <div id="clock-box" class="time-box"></div>

    <!-- ì „ì²´ ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="main-container">

      <div class="icon-column-wrapper">
        <div class="icon-title-bar">
          <button class="arrow-button" id="prevBtn">â¬…ï¸</button>
          <div class="icon-title" id="title">ì¸ìŠ¤íƒ€ ê°ì„±</div>
          <button class="arrow-button" id="nextBtn">â¡ï¸</button>
        </div>
      
        <div class="icon-grid" id="iconGrid"></div>
      </div>

      <!-- ì˜¤ë¥¸ìª½: ê³ ì •ëœ Spotify í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ì˜ì—­ -->
      <div class="playlist-column">
        <!-- ê° iframeì€ Spotifyì—ì„œ ê³µìœ í•œ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ë¥¼ ì‚½ì… -->
        <iframe src="https://open.spotify.com/embed/playlist/0znvYX1Wd2KeE80lEfgYWU?si=be53610498df4771&utm_source=generator" 
          frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
          loading="lazy"></iframe>

        <iframe src="https://open.spotify.com/embed/playlist/1NpUHfTxcSsdIT1vNyXc1U?si=dedd3882dfd54eca&utm_source=generator" 
          frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
          loading="lazy"></iframe>

        <iframe src="https://open.spotify.com/embed/playlist/3GjnImUmFxBYnWwBho6SE8?si=68e7836172484ff2&utm_source=generator" 
          frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
          loading="lazy"></iframe>

        <iframe src="https://open.spotify.com/embed/playlist/59PXvtjDCzcCndx59QkiSH?si=13fc65aa3ee84e29&utm_source=generator" 
          frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
          loading="lazy"></iframe>
      </div>
    </div>

    <!-- ë³¼ë¥¨ ì¡°ì ˆ ìŠ¬ë¼ì´ë” -->
    <div class="volume-control" style="font-family: 'Maplestory', sans-serif; font-weight: bold;">
      ğŸ”‰ Volume: 
      <input type="range" id="volumeSlider" min="0.01" max="1" step="0.01" value="0.1">
      <!-- ìŠ¬ë¼ì´ë”ë¥¼ ì›€ì§ì´ë©´ JavaScriptì—ì„œ ë³¼ë¥¨ì´ ì¡°ì •ë¨ -->
    </div>

    <!-- ì˜¤ë””ì˜¤ ì¬ìƒì„ ìœ„í•œ audio ìš”ì†Œ (ë³´ì´ì§€ ì•ŠìŒ) -->
    <audio id="myAudio"></audio>

    <!-- ê³¡ ì´ë¦„ í‘œì‹œ ë°” -->
    <div id="trackInfoBar" class="track-info-bar">ì¬ìƒ ì¤‘: ì—†ìŒ</div>

    <div class="audio-controls">
      <button id="rewindBtn">âª</button> <!-- 10ì´ˆ ë’¤ë¡œ -->
      <button id="playPauseBtn">â–¶ï¸</button>   <!-- ì¬ìƒ/ì¼ì‹œì •ì§€ ë²„íŠ¼ -->
      <button id="forwardBtn">â©</button>  <!-- 10ì´ˆ ì•ìœ¼ë¡œ -->
      <button id="stopBtn">â¹ï¸</button>        <!-- ì •ì§€ ë²„íŠ¼ -->
      <button id="loopBtn">ğŸ”</button>        <!-- ë£¨í”„ ì¬ìƒ ë²„íŠ¼ -->
      <button id="shuffleBtn">ğŸ²</button>     <!-- ì…”í”Œ ì¬ìƒ ë²„íŠ¼ -->
      <button id="autoShuffleBtn">â™¾ï¸</button> <!-- ìë™ ëœë¤ ì¬ìƒ -->
      <button id="toggleViewBtn">ğŸŸ¦</button>
    </div>
  </div>

  <!-- ì´ë¯¸ì§€ íšŒì „ìš© êµ¬ì¡° -->
  <div id="rotatingWrapper">
    <img id="rotatingIcon" src="" alt="Album Art" />
  </div>

  <!-- ì¢Œì¸¡ í•˜ë‹¨ì— í™”ì‚´í‘œ ë²„íŠ¼ + ì •ë³´ ë°•ìŠ¤ -->
  <div id="bottomLeftContainer" style="position: fixed; bottom: 30px; left: 40px; z-index: 9999;">
    <button id="toggleInfoBtn">â¬†ï¸</button>
    <div id="siteInfo">
      Version: 1.3.0<br>
      Visitors: <span id="visitorCount">0</span>
      Developer: Pascal345<br>
    </div>
    <div id="backgroundThumbnails" class="background-thumbs">
      <img src="background.png" class="bg-thumb" data-bg="background.png" />
      <img src="images/background/background1.png" class="bg-thumb" data-bg="images/background/background1.png" />
      <img src="images/background/background2.png" class="bg-thumb" data-bg="images/background/background2.png" />
      <img src="images/background/background3.png" class="bg-thumb" data-bg="images/background/background3.png" />
      <img src="images/background/background4.png" class="bg-thumb" data-bg="images/background/background4.png" />
    </div>
  </div>

  <div id="bgOverlay"></div>

  <script>
    
    // HTML ìš”ì†Œë“¤ì„ ê°€ì ¸ì˜´
    const audio = document.getElementById('myAudio');           // ì˜¤ë””ì˜¤ ê°ì²´
    const iconGrid = document.getElementById('iconGrid');       // ì‚¬ìš´ë“œ ë²„íŠ¼ ì´ë¯¸ì§€ê°€ ë“¤ì–´ê°ˆ ê·¸ë¦¬ë“œ ì˜ì—­
    const title = document.getElementById('title');             // í˜„ì¬ ë°•ìŠ¤ì˜ íƒ€ì´í‹€ í‘œì‹œ ì˜ì—­
    const volumeSlider = document.getElementById('volumeSlider'); // ë³¼ë¥¨ ìŠ¬ë¼ì´ë”
    const playPauseBtn = document.getElementById('playPauseBtn'); // ì¬ìƒ/ì¼ì‹œì •ì§€ ë²„íŠ¼
    const stopBtn = document.getElementById('stopBtn');           // ì •ì§€ ë²„íŠ¼
    const loopBtn = document.getElementById('loopBtn');           // ë°˜ë³µì¬ìƒ ë²„íŠ¼
    const shuffleBtn = document.getElementById('shuffleBtn');     // ëœë¤ì¬ìƒ ë²„íŠ¼
    const timeBox = document.getElementById('time-box');     // ì˜¤ë””ì˜¤ ì¬ìƒ ì‹œê°„ ë°•ìŠ¤
    const clockBox = document.getElementById('clock-box');   // í˜„ì¬ ì‹œê° ë°•ìŠ¤

    // ì´ˆê¸° ë³¼ë¥¨ ì„¤ì •
    audio.volume = parseFloat(volumeSlider.value);

    // ë³¼ë¥¨ ìŠ¬ë¼ì´ë” ë³€í™” ê°ì§€í•˜ì—¬ ì˜¤ë””ì˜¤ ë³¼ë¥¨ ë°˜ì˜
    volumeSlider.addEventListener('input', () => {
      audio.volume = parseFloat(volumeSlider.value);
    });

    // í˜„ì¬ ë°•ìŠ¤ ì¸ë±ìŠ¤ (ì²˜ìŒì€ 0ë²ˆ)
    let currentIndex = 0;

    // í˜„ì¬ ì¬ìƒ ì¤‘ì¸ ì‚¬ìš´ë“œ ì¸ë±ìŠ¤ (-1ì€ ì¬ìƒ ì¤‘ ì•„ë‹˜)
    let currentSoundIndex = -1;

    const data = [
      {
        title: 'ì¸ìŠ¤íƒ€ ê°ì„±',
        tracks: [
          { sound: 'sounds/1-1.mp3', image: 'images/1-1.png', title: "Everything", artist: "ê²€ì •ì¹˜ë§ˆ" },
          { sound: 'sounds/1-2.mp3', image: 'images/1-2.png', title: "ì€ë°©ìš¸", artist: "DANIEL" },
          { sound: 'sounds/1-3.mp3', image: 'images/1-3.png', title: "Here with me", artist: "d4vd" },
          { sound: 'sounds/1-4.mp3', image: 'images/1-4.png', title: "Come back with me", artist: "Siggerr" },
          { sound: 'sounds/1-5.mp3', image: 'images/1-5.png', title: "ì†Œë‚˜ê¸°", artist: "1968" },
          { sound: 'sounds/1-6.mp3', image: 'images/1-6.png', title: "I believe", artist: "ì‹ ìŠ¹í›ˆ" },
          { sound: 'sounds/1-7.mp3', image: 'images/1-7.png', title: "ë¯¸ì¹˜ê²Œ í•´", artist: "ë²”í‚¤" },
          { sound: 'sounds/1-8.mp3', image: 'images/1-8.png', title: "Feels", artist: "Calvin Harris" },
        ]
      },
      {
        title: 'ì”ì”í•œ ìŒì•…',
        tracks: [
          { sound: 'sounds/2-1.mp3', image: 'images/2-1.png', title: "ì£¼ì €í•˜ëŠ” ì—°ì¸ë“¤ì„ìœ„í•´", artist: "ì”ë‚˜ë¹„" },
          { sound: 'sounds/2-2.mp3', image: 'images/2-2.png', title: "She", artist: "ì”ë‚˜ë¹„" },
          { sound: 'sounds/2-3.mp3', image: 'images/2-3.png', title: "Home Sweet Home", artist: "ì¹´ë”ê°€ë“ " },
          { sound: 'sounds/2-4.mp3', image: 'images/2-4.png', title: "ìš°ì‚°", artist: "ì—í”½í•˜ì´" },
          { sound: 'sounds/2-5.mp3', image: 'images/2-5.png', title: "Yours", artist: "ë°ì´ë¨¼ìŠ¤ì´ì–´" },
          { sound: 'sounds/2-6.mp3', image: 'images/2-6.png', title: "ì¢‹ì€ë°¤ ì¢‹ì€ê¿ˆ", artist: "ë„ˆë“œì»¤ë„¥ì…˜ì…˜" },
          { sound: 'sounds/2-7.mp3', image: 'images/2-7.png', title: "TOMBOY", artist: "ì˜¤í˜" },
          { sound: 'sounds/2-8.mp3', image: 'images/2-8.png', title: "ê°€ì„ì´ ì˜¤ë©´", artist: "ì´ë¬¸ì„¸" },
          { sound: 'sounds/2-9.mp3', image: 'images/2-9.png', title: "ì·¨ê¸°ë¥¼ ë¹Œë ¤", artist: "ì‚°ë“¤" },
          { sound: 'sounds/2-10.mp3', image: 'images/2-10.png', title: "ê³ ë°±", artist: "ëœ¨ê±°ìš´ ê°ì" },
          { sound: 'sounds/2-11.mp3', image: 'images/2-11.png', title: "ëˆˆì‚¬ëŒ", artist: "ì •ìŠ¹í™˜" },
          { sound: 'sounds/2-12.mp3', image: 'images/2-12.png', title: "ë…¸ì„", artist: "ë‹¤ë¹„ì¹˜" },
          { sound: 'sounds/2-13.mp3', image: 'images/2-13.png', title: "ì†Œë…€", artist: "ì˜¤í˜" },
          { sound: 'sounds/2-14.mp3', image: 'images/2-14.png', title: "ìœ„ì‰ìœ„ì‰", artist: "í˜ì˜¤" }
        ]
      },
      {
        title: 'ì‹ ë‚˜ëŠ” ìŒì•…',
        tracks: [
          { sound: 'sounds/3-1.mp3', image: 'images/3-1.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/3-2.mp3', image: 'images/3-2.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/3-3.mp3', image: 'images/3-3.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/3-4.mp3', image: 'images/3-4.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/3-5.mp3', image: 'images/3-5.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/3-6.mp3', image: 'images/3-6.png', title: "Missing", artist: "Unknown" }
        ]
      },
      {
        title: 'í™í•©',
        tracks: [
          { sound: 'sounds/4-1.mp3', image: 'images/4-1.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/4-2.mp3', image: 'images/4-2.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/4-3.mp3', image: 'images/4-3.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/4-4.mp3', image: 'images/4-4.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/4-5.mp3', image: 'images/4-5.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/4-6.mp3', image: 'images/4-6.png', title: "Missing", artist: "Unknown" }
        ]
      },
      {
        title: 'ë°œë¼ë“œ',
        tracks: [
          { sound: 'sounds/5-1.mp3', image: 'images/5-1.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/5-2.mp3', image: 'images/5-2.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/5-3.mp3', image: 'images/5-3.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/5-4.mp3', image: 'images/5-4.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/5-5.mp3', image: 'images/5-5.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/5-6.mp3', image: 'images/5-6.png', title: "Missing", artist: "Unknown" }
        ]
      },
      {
        title: 'í•´ì™¸ íŒì†¡',
        tracks: [
          { sound: 'sounds/6-1.mp3', image: 'images/6-1.png', title: "Just the two of Us", artist: "Bill Withers" },
          { sound: 'sounds/6-2.mp3', image: 'images/6-2.png', title: "I'm Not The Only One", artist: "Sam Smith" },
          { sound: 'sounds/6-3.mp3', image: 'images/6-3.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/6-4.mp3', image: 'images/6-4.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/6-5.mp3', image: 'images/6-5.png', title: "Missing", artist: "Unknown" },
          { sound: 'sounds/6-6.mp3', image: 'images/6-6.png', title: "Missing", artist: "Unknown" }
        ]
      }
    ];

    // ì•„ì´ì½˜ ë° íƒ€ì´í‹€ ë¡œë“œ í•¨ìˆ˜
    function loadBox(index) {
      const box = data[index];
      title.textContent = box.title;
      iconGrid.innerHTML = '';
    
      box.tracks.forEach((track) => {
        const iconWrapper = document.createElement('div');
        iconWrapper.className = 'icon-item';
    
        const img = document.createElement('img');
        img.src = track.image;
        img.onerror = function () {
          img.src = 'images/missing.png';
        };
        img.className = 'playButton';
    
        const textWrapper = document.createElement('div');
        textWrapper.className = 'text-info';
    
        const titleElem = document.createElement('div');
        titleElem.className = 'song-title';
        titleElem.textContent = track.title || "ì—†ìŒ";
    
        const artistElem = document.createElement('div');
        artistElem.className = 'song-artist';
        artistElem.textContent = track.artist || "-";
    
        textWrapper.appendChild(titleElem);
        textWrapper.appendChild(artistElem);
    
        iconWrapper.appendChild(img);
        iconWrapper.appendChild(textWrapper);
    
        iconWrapper.addEventListener('click', () => {
          playSound(track.sound);
        });
    
        iconGrid.appendChild(iconWrapper);
      });
    }
    
    loadBox(currentIndex); // ì´ˆê¸° ë°•ìŠ¤ ë¡œë“œ

    // ì´ì „ ë²„íŠ¼ í´ë¦­ ì‹œ ì´ì „ ë°•ìŠ¤ë¡œ ì´ë™
    document.getElementById('prevBtn').addEventListener('click', () => {
      currentIndex = (currentIndex - 1 + data.length) % data.length; // ì¸ë±ìŠ¤ ê°ì†Œ, ìˆœí™˜
      loadBox(currentIndex);
    });

    // ë‹¤ìŒ ë²„íŠ¼ í´ë¦­ ì‹œ ë‹¤ìŒ ë°•ìŠ¤ë¡œ ì´ë™
    document.getElementById('nextBtn').addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % data.length; // ì¸ë±ìŠ¤ ì¦ê°€, ìˆœí™˜
      loadBox(currentIndex);
    });
    
    // ì „ì—­ì—ì„œ í˜„ì¬ ì¬ìƒ ì¤‘ì¸ íŠ¸ë™ ê²½ë¡œë¥¼ ì¶”ì 
    let currentTrackSrc = null;

    let isStopped = false; // ì „ì—­ì—ì„œ ì„ ì–¸ í•„ìš”!

    stopBtn.addEventListener('click', () => {
      playSound('sounds/missing.mp3');
    
      // ì´ë¯¸ì§€ ì„¤ì •
      rotatingIcon.src = 'images/missing.png';
      rotatingIcon.classList.remove('rotating', 'paused');
      document.getElementById('rotatingWrapper').style.display = 'block';
    
      playPauseBtn.textContent = 'â¸ï¸';
    });

    // ì¬ìƒ ë²„íŠ¼ ë™ì‘
    playPauseBtn.addEventListener('click', () => {
      // âœ… í˜„ì¬ ì¬ìƒ ì¤‘ì¸ íŠ¸ë™ì´ ì—†ìœ¼ë©´ ì¬ìƒí•˜ì§€ ì•ŠìŒ
      if (!currentTrackSrc) {
        console.warn('ğŸµ ì¬ìƒí•  íŠ¸ë™ì´ ì—†ìŠµë‹ˆë‹¤.');
        return;
      }

      if (audio.paused) {
        audio.play();
        playPauseBtn.textContent = 'â¸ï¸';
        rotatingIcon.classList.remove('paused');
        rotatingIcon.classList.add('rotating');
      } else {
        audio.pause();
        playPauseBtn.textContent = 'â–¶ï¸';
        rotatingIcon.classList.add('paused');
      }
    });
    
    function showMissingIcon() {
      const wrapper = document.getElementById('rotatingWrapper');
      wrapper.style.display = 'block';
    
      rotatingIcon.classList.remove('rotating', 'paused'); // íšŒì „ ë©ˆì¶¤
      rotatingIcon.src = 'images/missing.png'; // missing ì´ë¯¸ì§€ë¡œ êµì²´
    }

    // ë£¨í”„ ë²„íŠ¼
    loopBtn.addEventListener('click', () => {
      audio.loop = !audio.loop;
      loopBtn.style.color = audio.loop ? 'yellow' : 'white';
      loopBtn.textContent = audio.loop ? 'ğŸ”‚' : 'ğŸ”';
    });

    // ì…”í”Œ ë²„íŠ¼ (ìˆ˜ì •)
    shuffleBtn.addEventListener('click', () => {
      const validSounds = getValidSoundsInCurrentBox();
      
      if (validSounds.length === 0) {
        console.warn('ğŸ² ì…”í”Œ ê°€ëŠ¥í•œ ê³¡ì´ ì—†ìŠµë‹ˆë‹¤!');
        return;
      }
      
      const randomIndex = Math.floor(Math.random() * validSounds.length);
      const randomSoundPath = validSounds[randomIndex];
      playSound(randomSoundPath);
    });

    // ì¬ìƒ/ì¼ì‹œì •ì§€ ìƒíƒœ ìë™ ë°˜ì˜
    audio.addEventListener('play', () => {
      playPauseBtn.textContent = 'â¸ï¸';
      showRotatingIcon();
    });

    audio.addEventListener('pause', () => {
      if (!audio.ended && audio.currentTime > 0) {
        pauseRotatingIcon(); // ì¼ì‹œì •ì§€ì¼ ë•Œë§Œ íšŒì „ ë©ˆì¶”ê¸°
      }
    });

    // ì˜¤ë””ì˜¤ ì¬ìƒ ì‹œê°„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateTimeText() {
      const current = formatTime(audio.currentTime);
      const duration = formatTime(audio.duration || 0);
      timeBox.textContent = `${current} / ${duration}`;
    }

    // ë‚ ì§œ + ì‹œê°„ í‘œì‹œ: MMì›” DDì¼ HH:MM:SS
    function updateClockText() {
      const now = new Date();

      const month = (now.getMonth() + 1).toString().padStart(2, '0'); // getMonthëŠ” 0ë¶€í„° ì‹œì‘
      const date = now.getDate().toString().padStart(2, '0');
      const hour = now.getHours().toString().padStart(2, '0');
      const min = now.getMinutes().toString().padStart(2, '0');
      const sec = now.getSeconds().toString().padStart(2, '0');

      clockBox.textContent = `${month}ì›” ${date}ì¼ ${hour}:${min}:${sec}`;
    }

    // í˜„ì¬ ì‹œê°„ì€ í•­ìƒ ì—…ë°ì´íŠ¸
    setInterval(updateClockText, 1000);

    // ì²˜ìŒ ë¡œë“œë˜ì—ˆì„ ë•Œë„ ì¦‰ì‹œ ë³´ì´ê²Œ
    function showClockBox() {
      clockBox.classList.add('active');
      updateClockText();
    }

    // ì˜¤ë””ì˜¤ ì¬ìƒ ì¤‘ì¼ ë•Œë§Œ ì‹œê°„ í…ìŠ¤íŠ¸ ê°±ì‹ 
    setInterval(() => {
      if (!audio.paused && !audio.ended) {
        updateTimeText();
      }
    }, 500);

    // í˜„ì¬ ì‹œê°„ì€ í•­ìƒ ì—…ë°ì´íŠ¸
    setInterval(updateClockText, 1000);

    // ì˜¤ë””ì˜¤ ì¬ìƒ ì‹œê°„ ë°•ìŠ¤ í‘œì‹œ
    function updateTimeBox() {
      timeBox.classList.add('active');
      updateTimeText();
    }

    // í˜„ì¬ ì‹œê³„ ë°•ìŠ¤ í‘œì‹œ
    function showClockBox() {
      clockBox.classList.add('active');
      updateClockText();
    }

    // ì´ˆê¸° ì‹¤í–‰
    updateTimeBox();

    // ì‹œê°„ í˜•ì‹ í•¨ìˆ˜ (mm:ss)
    function formatTime(seconds) {
      const min = Math.floor(seconds / 60);
      const sec = Math.floor(seconds % 60);
      return `${min}:${sec.toString().padStart(2, '0')}`;
    }

    const playlistTitle = document.getElementById('playlist-title');
    const trackInfoBar = document.getElementById('trackInfoBar');

    // ê³¡ëª… ë°” í´ë¦­ ì‹œ ë‹«í˜
    trackInfoBar.addEventListener('click', () => {
      trackInfoBar.classList.remove('active');
    });

    const trackNames = {
      "1-1.mp3": { title: "Everything", artist: "ê²€ì •ì¹˜ë§ˆ" },
      "1-2.mp3": { title: "ì€ë°©ìš¸", artist: "DANIEL" },
      "1-3.mp3": { title: "Here with me", artist: "d4vd" },
      "1-4.mp3": { title: "Come back with me", artist: "Siggerr" },
      "1-5.mp3": { title: "ì†Œë‚˜ê¸°", artist: "1968" },
      "1-6.mp3": { title: "I believe", artist: "ì‹ ìŠ¹í›ˆ" },
      "1-7.mp3": { title: "ë¯¸ì¹˜ê²Œ í•´", artist: "ë²”í‚¤" },
      "1-8.mp3": { title: "Feels", artist: "Calvin Harris" },
    
      "2-1.mp3": { title: "ì£¼ì €í•˜ëŠ” ì—°ì¸ë“¤ì„ìœ„í•´", artist: "ì”ë‚˜ë¹„" },
      "2-2.mp3": { title: "She", artist: "ì”ë‚˜ë¹„" },
      "2-3.mp3": { title: "Home Sweet Home", artist: "ì¹´ë”ê°€ë“ " },
      "2-4.mp3": { title: "ìš°ì‚°", artist: "ì—í”½í•˜ì´" },
      "2-5.mp3": { title: "Yours", artist: "ë°ì´ë¨¼ìŠ¤ì´ì–´" },
      "2-6.mp3": { title: "ì¢‹ì€ë°¤ ì¢‹ì€ê¿ˆ", artist: "ë„ˆë“œì»¤ë„¥ì…˜ì…˜" },
      "2-7.mp3": { title: "TOMBOY", artist: "ì˜¤í˜" },
      "2-8.mp3": { title: "ê°€ì„ì´ ì˜¤ë©´", artist: "ì´ë¬¸ì„¸" },
      "2-9.mp3": { title: "ì·¨ê¸°ë¥¼ ë¹Œë ¤", artist: "ì‚°ë“¤" },
      "2-10.mp3": { title: "ê³ ë°±", artist: "ëœ¨ê±°ìš´ ê°ì" },
      "2-11.mp3": { title: "ëˆˆì‚¬ëŒ", artist: "ì •ìŠ¹í™˜" },
      "2-12.mp3": { title: "ë…¸ì„", artist: "ë‹¤ë¹„ì¹˜" },
      "2-13.mp3": { title: "ì†Œë…€", artist: "ì˜¤í˜" },
      "2-14.mp3": { title: "ìœ„ì‰ìœ„ì‰", artist: "í˜ì˜¤" },
    
      "3-1.mp3": { title: "Missing", artist: "Unknown" },
      "3-2.mp3": { title: "Missing", artist: "Unknown" },
      "3-3.mp3": { title: "Missing", artist: "Unknown" },
      "3-4.mp3": { title: "Missing", artist: "Unknown" },
      "3-5.mp3": { title: "Missing", artist: "Unknown" },
      "3-6.mp3": { title: "Missing", artist: "Unknown" },
    
      "4-1.mp3": { title: "Missing", artist: "Unknown" },
      "4-2.mp3": { title: "Missing", artist: "Unknown" },
      "4-3.mp3": { title: "Missing", artist: "Unknown" },
      "4-4.mp3": { title: "Missing", artist: "Unknown" },
      "4-5.mp3": { title: "Missing", artist: "Unknown" },
      "4-6.mp3": { title: "Missing", artist: "Unknown" },
    
      "5-1.mp3": { title: "Missing", artist: "Unknown" },
      "5-2.mp3": { title: "Missing", artist: "Unknown" },
      "5-3.mp3": { title: "Missing", artist: "Unknown" },
      "5-4.mp3": { title: "Missing", artist: "Unknown" },
      "5-5.mp3": { title: "Missing", artist: "Unknown" },
      "5-6.mp3": { title: "Missing", artist: "Unknown" },
    
      "6-1.mp3": { title: "Just the two of Us", artist: "Bill Withers" },
      "6-2.mp3": { title: "I'm Not The Only One", artist: "Sam Smith" },
      "6-3.mp3": { title: "Missing", artist: "Unknown" },
      "6-4.mp3": { title: "Missing", artist: "Unknown" },
      "6-5.mp3": { title: "Missing", artist: "Unknown" },
      "6-6.mp3": { title: "Missing", artist: "Unknown" },
    
      "missing.mp3": { title: "ì—†ìŒ", artist: "-" }
    };

    const mainContainer = document.querySelector('.main-container');
    const playlistColumn = document.querySelector('.playlist-column');
    let hidden = false;

    const fadeIn = (element) => {
      const originalDisplay = element.dataset.originalDisplay || getComputedStyle(element).display;
      element.style.display = originalDisplay === 'none' ? 'block' : originalDisplay;
      element.classList.remove('fade-out');
      element.classList.add('fade-in');
    };

    const fadeOut = (element) => {
      element.dataset.originalDisplay = getComputedStyle(element).display;
      element.classList.remove('fade-in');
      element.classList.add('fade-out');
      setTimeout(() => {
        if (element.classList.contains('fade-out')) {
          element.style.display = 'none';
        }
      }, 500);
    };

    // f í‚¤ë¥¼ ëˆŒë €ì„ ë•Œ í† ê¸€
    document.addEventListener('keydown', (e) => {
      if (e.key.toLowerCase() === 'f') {
        if (!hidden) {
          // ğŸ‘‰ clockBoxê°€ ì¼œì ¸ ìˆì—ˆëŠ”ì§€ ê¸°ì–µí•´ë‘ 
          wasClockVisibleBeforeHide = clockBox.classList.contains('active');
    
          fadeOut(mainContainer);
          fadeOut(playlistColumn);
    
          if (wasClockVisibleBeforeHide) {
            clockBox.classList.remove('active');
          }
    
          hidden = true;
        } else {
          fadeIn(mainContainer);
          fadeIn(playlistColumn);
    
          // ğŸ‘‰ clockBoxê°€ ì›ë˜ ì¼œì ¸ ìˆì—ˆìœ¼ë©´ ë‹¤ì‹œ ë³´ì—¬ì¤Œ
          if (wasClockVisibleBeforeHide) {
            clockBox.classList.add('active');
          }
    
          hidden = false;
        }
      }
    });

    // ì´ˆê¸° ì§„ì… ì‹œ í‘œì‹œ
    window.addEventListener('DOMContentLoaded', () => {
      mainContainer.classList.add('fade-in');
      playlistColumn.classList.add('fade-in');
    });

    const rotatingWrapper = document.getElementById('rotatingWrapper');
    const rotatingIcon = document.getElementById('rotatingIcon');

    function showRotatingIcon() {
      rotatingIcon.classList.remove('paused');
      rotatingIcon.classList.add('rotating');
      document.getElementById('rotatingWrapper').style.display = 'block';
    }

    function pauseRotatingIcon() {
      rotatingIcon.classList.add('paused');
    }
    
    function hideRotatingIcon() {
      const wrapper = document.getElementById('rotatingWrapper');
      wrapper.style.display = 'none'; // ì•„ì˜ˆ ìˆ¨ê¸°ê¸°
    
      rotatingIcon.classList.remove('rotating', 'paused');
    }   

    function updateRotatingIcon(source) {
      const fileName = source.split('/').pop().replace('.mp3', '');
      const imagePath = `images/${fileName}.png`;
    
      console.log("ğŸ”Š ì¬ìƒëœ ì†ŒìŠ¤:", source);
      console.log("ğŸ“ íŒŒì‹±ëœ íŒŒì¼ëª…:", fileName);
      console.log("ğŸ–¼ï¸ ì´ë¯¸ì§€ ê²½ë¡œ:", imagePath);
    
      rotatingIcon.src = imagePath;
    }

    function playSound(src) {
      const fileName = src.split('/').pop().trim();
      const trackInfo = trackNames[fileName] || { title: "ì—†ìŒ", artist: "-" };
      currentTrackSrc = src;
    
      // 1. ğŸ› ï¸ íŠ¸ë™ ì •ë³´ ë¨¼ì € ì¦‰ì‹œ ë°˜ì˜
      if (trackInfo && trackInfo.title && trackInfo.artist) {
        trackInfoBar.textContent = `${trackInfo.title} - ${trackInfo.artist}`;
      } else {
        trackInfoBar.textContent = "ì—†ìŒ";
      }
    
      // 2. ğŸ› ï¸ ì˜¤ë””ì˜¤ ì¬ìƒ ì¤€ë¹„
      audio.pause();
      audio.currentTime = 0;
      audio.src = src;
    
      // 3. ğŸ› ï¸ êµ´ëŸ¬ì˜¤ëŠ” ì• ë‹ˆë©”ì´ì…˜ (ì—¬ê¸°ëŠ” ê·¸ëŒ€ë¡œ 500ms ë”œë ˆì´)
      rotatingWrapper.classList.remove('rolling-in');
      void rotatingWrapper.offsetWidth; // ê°•ì œ ë¦¬í”Œë¡œìš°
      rotatingWrapper.classList.add('rolling-in');
    
      updateRotatingIcon(src);
      rotatingWrapper.style.display = 'block';
    
      setTimeout(() => {
        audio.play().catch((err) => {
          console.error("ì¬ìƒ ì˜¤ë¥˜:", err);
          trackInfoBar.textContent = "ì¬ìƒ ì˜¤ë¥˜ ë°œìƒ"; // ì´ê±´ ë‚˜ì¤‘ì— ì—ëŸ¬ë‚¬ì„ ë•Œë§Œ ë°”ë€œ
        });
    
        updateTimeBox();
        rotatingIcon.classList.remove('paused');
        rotatingIcon.classList.add('rotating');
      }, 500);
    }    

    rotatingIcon.onerror = function () {
      rotatingIcon.src = 'images/missing.png';
    };

    console.log(audio.src);  // í˜„ì¬ ì¬ìƒ ì¤‘ íŒŒì¼ ì „ì²´ ê²½ë¡œ
    console.log(audio.src.split('/').pop().trim());  // íŒŒì¼ëª…ë§Œ ì¶”ì¶œ

    let autoShuffle = false;
    let playedTracks = new Set();  // âœ… ì¬ìƒëœ íŠ¸ë™ ì €ì¥ìš©

    document.getElementById('autoShuffleBtn').addEventListener('click', () => {
      autoShuffle = !autoShuffle;
    
      const btn = document.getElementById('autoShuffleBtn');
      btn.style.color = autoShuffle ? 'lime' : 'white';
      btn.textContent = autoShuffle ? 'âœ…' : 'â™¾ï¸';
    
      if (autoShuffle) {
        playedTracks.clear();  // ìƒˆë¡­ê²Œ ì‹œì‘í•  ë•ŒëŠ” ë¦¬ì…‹
        playRandomTrackInCurrentBox();
      } else {
        playedTracks.clear();  // â— í•´ì œ ì‹œì—ë„ ë¦¬ì…‹
      }
    });

    // ğŸ” ìë™ ëœë¤ ì¬ìƒ í•¨ìˆ˜ (ì¤‘ë³µ ë°©ì§€)
    function playRandomTrackInCurrentBox() {
      const currentBox = data[currentIndex];
      const availableTracks = currentBox.tracks.filter(track => {
        const fileName = track.sound.split('/').pop();
        return trackNames[fileName] && !fileName.includes('missing') && !playedTracks.has(track.sound);
      });

      if (availableTracks.length === 0) {
        console.warn('âœ… ëª¨ë“  íŠ¸ë™ì´ ì¬ìƒë˜ì—ˆìŠµë‹ˆë‹¤.');
        autoShuffle = false;

        const btn = document.getElementById('autoShuffleBtn');
        btn.style.color = 'white';
        btn.textContent = 'â™¾ï¸';
        return;
      }

      const randomIndex = Math.floor(Math.random() * availableTracks.length);
      const selectedTrack = availableTracks[randomIndex];

      playedTracks.add(selectedTrack.sound);  // âœ… ì¬ìƒ ê¸°ë¡ ì¶”ê°€
      playSound(selectedTrack.sound);
    }

    // â¹ï¸ ê³¡ ì¢…ë£Œ ì‹œ ìë™ ë‹¤ìŒ íŠ¸ë™ ì¬ìƒ
    audio.addEventListener('ended', () => {
      if (autoShuffle) {
        playRandomTrackInCurrentBox();
      }
    });
    
    // í˜„ì¬ ë°•ìŠ¤ ì•ˆì—ì„œ ëœë¤ ì¬ìƒ ê°€ëŠ¥í•œ ê³¡ ë¦¬ìŠ¤íŠ¸
    function getValidSoundsInCurrentBox() {
      const currentBox = data[currentIndex];
      return currentBox.tracks.map(track => track.sound).filter(sound => {
        const fileName = sound.split('/').pop();
        return trackNames[fileName] && !fileName.includes('missing');
      });
    }

    // íšŒì „ ì´ë¯¸ì§€ í´ë¦­ ì‹œ ì¬ìƒì¤‘ ë°” í† ê¸€
    rotatingWrapper.addEventListener('click', () => {
      trackInfoBar.classList.toggle('active');
    });

    // ì¬ìƒì¤‘ ë°” í´ë¦­ ì‹œ ì‚¬ë¼ì§€ê²Œ
    trackInfoBar.addEventListener('click', () => {
      trackInfoBar.classList.remove('active');
    });

    rotatingWrapper.style.display = 'block';
    
    let isClockVisible = false;

    playlistTitle.addEventListener('click', () => {
      if (isClockVisible) {
        clockBox.classList.remove('active');
      } else {
        clockBox.classList.add('active');
      }
      isClockVisible = !isClockVisible;
      wasClockVisibleBeforeHide = isClockVisible; // âœ… ì—¬ê¸° ì¶”ê°€ (Playlist í´ë¦­í•  ë•Œë„ ë™ê¸°í™”)
    });
    
    clockBox.addEventListener('click', () => {
      clockBox.classList.remove('active');
      isClockVisible = false;
      wasClockVisibleBeforeHide = false; // âœ… ClockBox í´ë¦­í•  ë•Œë„ ë™ê¸°í™”
    });    

    let wasClockVisibleBeforeHide = false;

    const rewindBtn = document.getElementById('rewindBtn');
    const forwardBtn = document.getElementById('forwardBtn');

    // 10ì´ˆ ë’¤ë¡œ ì´ë™
    rewindBtn.addEventListener('click', () => {
      if (!isNaN(audio.duration)) {
        audio.currentTime = Math.max(audio.currentTime - 10, 0);
        updateTimeText();  // ğŸ”¥ ì´ë™ ì¦‰ì‹œ ì‹œê°„ ì—…ë°ì´íŠ¸
      }
    });

    // 10ì´ˆ ì•ìœ¼ë¡œ ì´ë™
    forwardBtn.addEventListener('click', () => {
      if (!isNaN(audio.duration)) {
        audio.currentTime = Math.min(audio.currentTime + 10, audio.duration);
        updateTimeText();  // ğŸ”¥ ì´ë™ ì¦‰ì‹œ ì‹œê°„ ì—…ë°ì´íŠ¸
      }
    });

    const toggleViewBtn = document.getElementById('toggleViewBtn');

    toggleViewBtn.addEventListener('click', () => {
      if (!hidden) {
        fadeOut(mainContainer);
        fadeOut(playlistColumn);
        hidden = true;
      } else {
        fadeIn(mainContainer);
        fadeIn(playlistColumn);
        hidden = false;
      }
    });

    const toggleInfoBtn = document.getElementById('toggleInfoBtn');
    const siteInfo = document.getElementById('siteInfo');
    const backgroundThumbnails = document.getElementById('backgroundThumbnails');

    toggleInfoBtn.addEventListener('click', () => {
      siteInfo.classList.toggle('active');
      backgroundThumbnails.classList.toggle('active');
    });

    // ë°©ë¬¸ì ìˆ˜ (ì„ì‹œ ì¦ê°€ ê¸°ëŠ¥)
    let visitorCount = parseInt(localStorage.getItem('visitorCount') || '0');
    visitorCount += 1;
    localStorage.setItem('visitorCount', visitorCount);
    document.getElementById('visitorCount').textContent = visitorCount;

    document.querySelectorAll('.bg-thumb').forEach(img => {
      img.addEventListener('click', () => {
        const bgPath = img.getAttribute('data-bg');
    
        // ë°°ê²½ ì´ë¯¸ì§€ ì ìš©
        document.body.style.backgroundImage = `url('${bgPath}')`;
      });
    });

    // ë°°ê²½ë³„ ì¶”ì²œ í…ìŠ¤íŠ¸ ìƒ‰ìƒ
    const backgroundColorMap = {
      'background.png': '#AEE2FF', // ê¸°ë³¸ ë°°ê²½: í°ìƒ‰
      'images/background/background1.png': '#4d3b2f', // ë…¸ë€ ê³„ì—´
      'images/background/background2.png': '#cccccc', // ì²­ë¡ ê³„ì—´
      'images/background/background3.png': '#FFD166', // í•‘í¬ ê³„ì—´
      'images/background/background4.png': '#F9B24E', // í•˜ëŠ˜ìƒ‰ ê³„ì—´
    };

    function changeBackgroundSmoothly(imagePath) {
      const overlay = document.getElementById('bgOverlay');
      const playlistTitle = document.getElementById('playlist-title');
    
      // ë°°ê²½ ìœ„ì¹˜ ê²°ì • (ë°°ê²½ 2ë§Œ ë‹¤ë¥´ê²Œ ì„¤ì •)
      const position = imagePath.includes('background2.png') ? 'center 85%' : 'center center';
    
      // ì˜¤ë²„ë ˆì´ì— ìœ„ì¹˜ì™€ ë°°ê²½ ì ìš©
      overlay.style.backgroundImage = `url('${imagePath}')`;
      overlay.style.backgroundPosition = position;
      overlay.style.opacity = '1';
    
      // 600ms í›„ ë³¸ ë°°ê²½ êµì²´
      setTimeout(() => {
        document.body.style.backgroundImage = `url('${imagePath}')`;
        document.body.style.backgroundPosition = position;
        overlay.style.opacity = '0';
      }, 600);
    
      // í…ìŠ¤íŠ¸ ìƒ‰ìƒ ë³€ê²½
      const newColor = backgroundColorMap[imagePath] || '#ffffff';
      playlistTitle.style.color = newColor;
    }    
    
    // ì¸ë„¤ì¼ í´ë¦­ ì‹œ ì´ë²¤íŠ¸ ì—°ê²°
    document.querySelectorAll('.bg-thumb').forEach(img => {
      img.addEventListener('click', () => {
        const bgPath = img.getAttribute('data-bg');
        changeBackgroundSmoothly(bgPath);
      });
    });    

    const backgroundPaths = [
      'background.png',
      'images/background/background1.png',
      'images/background/background2.png',
      'images/background/background3.png',
      'images/background/background4.png',
    ];

    let currentBackgroundIndex = 0;

    function updateSelectedThumbnail() {
      document.querySelectorAll('.bg-thumb').forEach((thumb, index) => {
        if (index === currentBackgroundIndex) {
          thumb.classList.add('selected');
        } else {
          thumb.classList.remove('selected');
        }
      });
    }

    function changeBackgroundSmoothly(imagePath, index = null) {
      const overlay = document.getElementById('bgOverlay');
      const playlistTitle = document.getElementById('playlist-title');
    
      // âœ¨ ë°°ê²½ ë¨¼ì € ì ìš©í•´ì„œ ê¹œë¹¡ì„ ë°©ì§€
      document.body.style.backgroundImage = `url('${imagePath}')`;
    
      // ë°°ê²½ ìœ„ì¹˜ ì¡°ì •
      if (imagePath.includes('background2.png')) {
        document.body.style.backgroundPosition = 'center 85%';
        overlay.style.backgroundPosition = 'center 85%';
      } else {
        document.body.style.backgroundPosition = 'center center';
        overlay.style.backgroundPosition = 'center center';
      }
    
      // overlay íš¨ê³¼ ì ìš©
      overlay.style.backgroundImage = `url('${imagePath}')`;
      overlay.style.opacity = '1';
    
      // âœ¨ í…ìŠ¤íŠ¸ ìƒ‰ìƒ ë°”ë¡œ ë°˜ì˜
      const newColor = backgroundColorMap[imagePath] || '#ffffff';
      playlistTitle.style.color = newColor;
    
      // âœ¨ ì¸ë„¤ì¼ í…Œë‘ë¦¬ ì¦‰ì‹œ ë°˜ì˜
      if (index !== null) {
        currentBackgroundIndex = index;
        updateSelectedThumbnail();
      }
    
      // 600ms í›„ ì˜¤ë²„ë ˆì´ ì‚¬ë¼ì§
      setTimeout(() => {
        overlay.style.opacity = '0';
      }, 600);
    }

    // ì¸ë„¤ì¼ í´ë¦­ ì‹œ
    document.querySelectorAll('.bg-thumb').forEach((img, index) => {
      img.addEventListener('click', () => {
        const path = img.getAttribute('data-bg');
        changeBackgroundSmoothly(path, index);
      });
    });

    // í™”ì‚´í‘œ í‚¤ë¡œ ë°°ê²½ ì „í™˜
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight') {
        currentBackgroundIndex = (currentBackgroundIndex + 1) % backgroundPaths.length;
        changeBackgroundSmoothly(backgroundPaths[currentBackgroundIndex], currentBackgroundIndex);
      }
      if (e.key === 'ArrowLeft') {
        currentBackgroundIndex = (currentBackgroundIndex - 1 + backgroundPaths.length) % backgroundPaths.length;
        changeBackgroundSmoothly(backgroundPaths[currentBackgroundIndex], currentBackgroundIndex);
      }
    });

    // ì´ˆê¸° ì„ íƒ ë°˜ì˜
    updateSelectedThumbnail();

  </script>
</body>
</html>
