<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Playlist</title>
  <style>
    @font-face {
      font-family: 'ì—¬ê¸°ì–´ë•Œ ì˜ë‚œì²´ 2';
      src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_one@1.0/yg-jalnan.woff') format('woff');
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Maplestory', sans-serif;
      background: url('https://media.discordapp.net/attachments/1164303125205749846/1359115777806045224/backgroud.png?ex=67f64eb4&is=67f4fd34&hm=48ad453622e8d85a34836bffbb6bffa0565b28ce94cf60f43c313b2125117bfe&=&format=webp&quality=lossless&width=1843&height=1229') no-repeat center center fixed;
      background-size: cover;
      box-sizing: border-box;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 20px solid rgba(255, 255, 255, 0.2);
      box-sizing: border-box;
      pointer-events: none;
      z-index: 1;
    }

    .header {
      text-align: center;
      padding: 35px 0 10px;
      z-index: 2;
      position: relative;
    }

    .header h1 {
      font-family: 'ì—¬ê¸°ì–´ë•Œ ì˜ë‚œì²´ 2', sans-serif;
      font-size: 40px;
      color: #F1C40F;
      margin: 0;
    }

    .main-container {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      padding: 20px 50px;
      z-index: 2;
      position: relative;
    }

    .icon-column-wrapper {
      border: 4px solid #333333;
      padding: 20px;
      border-radius: 12px;
      background-color: #1f1f1f;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .icon-title-bar {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin-bottom: 15px;
    }

    .icon-title {
      font-family: 'ì—¬ê¸°ì–´ë•Œ ì˜ë‚œì²´ 2', sans-serif;
      font-size: 24px;
      color: #ffffff;
    }

    .arrow-button {
      background: none;
      border: none;
      font-size: 24px;
      color: white;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    
    .arrow-button:hover {
      transform: scale(1.3);
    }
    
    /* í´ë¦­ ë˜ëŠ” í‚¤ë³´ë“œ í¬ì»¤ìŠ¤ ì‹œì—ë„ í…Œë‘ë¦¬ ë³€í™” ì—†ìŒ */
    .arrow-button:focus,
    .arrow-button:active {
      outline: none;
      box-shadow: none;
      border: none;
    }

    .icon-grid {
      display: grid;
      grid-template-columns: repeat(2, 100px);
      gap: 20px;
    }

    .playButton {
      width: 100px;
      cursor: pointer;
      border: 3px solid #444444;
      border-radius: 8px;
      padding: 5px;
      background-color: #555555;
    }

    .playlist-column {
      display: flex;
      flex-direction: column;
      gap: 10px; /* ê¸°ì¡´ë³´ë‹¤ ë„‰ë„‰í•œ ê°„ê²©ìœ¼ë¡œ ì¦ê°€ */
      transform: translateY(-50px);
    
      border: 4px solid #333333;
      padding: 30px; /* ë‚´ë¶€ íŒ¨ë”©ë„ ì—¬ìœ  ìˆê²Œ */
      border-radius: 12px;
      background-color: #1f1f1f;
    }    

    iframe {
      border-radius: 12px;
      width: 300px;
      height: 152px;
    }

    .volume-control {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 999;
      font-family: 'Maplestory', sans-serif;
      font-weight: bold;
      background-color: rgba(0, 0, 0, 0.7);
      padding: 8px 14px;
      border-radius: 10px;
      color: white; /* ìš”ê±° ì¶”ê°€ */
    }
    #volumeSlider {
      width: 120px;
    }

    .playButton {
      width: 100px;
      cursor: pointer;
      border: 3px solid #444444;
      border-radius: 8px;
      padding: 5px;
      background-color: #555555;
      transition: transform 0.2s ease; /* ì• ë‹ˆë©”ì´ì…˜ ë¶€ë“œëŸ½ê²Œ */
    }
    
    .playButton:hover {
      transform: scale(1.1); /* ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ 20% ì»¤ì§ */
    }
    
    iframe {
      border-radius: 12px;
      width: 300px;
      height: 152px;
      transition: transform 0.2s ease; /* ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ */
    }
    
    iframe:hover {
      transform: scale(1.05); /* ì‚´ì§ ì»¤ì§ */
    }

    #volumeSlider {
      width: 120px;
      transition: transform 0.2s ease;
    }
    
    #volumeSlider:hover {
      transform: scale(1.05);
    }

    /* Playlist ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
    .header h1 {
      transition: transform 0.3s ease;
      display: inline-block; /* transform ì ìš©ì„ ìì—°ìŠ¤ëŸ½ê²Œ ë§Œë“¤ê¸° ìœ„í•´ */
    }
    
    .header:hover h1 {
      transform: scale(1.2); /* ì›í•˜ëŠ” ë¹„ìœ¨ë¡œ ì»¤ì§€ê²Œ ì¡°ì ˆ */
    }

    .time-box {
      font-family: 'Maplestory', sans-serif;
      font-weight: bold;
      font-size: 24px;
      text-align: center;
      margin-top: 10px;
      color: #ffffff;
      
      max-width: 90%; /* í™”ë©´ ë„ˆë¬´ ì•ˆ ë„˜ì¹˜ê²Œ ì œí•œ */
      width: fit-content; /* ë‚´ìš©ì— ë§ëŠ” ë„ˆë¹„ */
      height: 40px;
      opacity: 0;
      transform: translateY(-10px);
      transition: opacity 0.5s ease, transform 0.5s ease;
      pointer-events: none;
      display: flex;
      justify-content: center;
      align-items: center;
    
      background-color: rgba(0, 0, 0, 0.6);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 12px;
      padding: 0 12px;
    
      margin-left: auto;
      margin-right: auto; /* ì¤‘ì•™ ì •ë ¬ */
    }
    

    /* í™œì„±í™” ìƒíƒœ (ì‹œê°„ í‘œì‹œ) */
    .time-box.active {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden; /* ìŠ¤í¬ë¡¤ ì™„ì „ ì œê±° */
      height: 100%;
    }

    #time-box {
      position: fixed;
      bottom: 150px; /* volume-controlì´ bottom: 20pxì´ë¯€ë¡œ ìœ„ë¡œ 60px ë„ì›€ */
      left: 50%;
      transform: translateX(-50%);
      z-index: 999;
    
      font-family: 'Maplestory', sans-serif;
      font-weight: bold;
      font-size: 16px;
      text-align: center;
    
      background-color: rgba(0, 0, 0, 0.6);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 12px;
      padding: 0 12px;
      height: 40px;
    
      max-width: 90%;
      width: fit-content;
      color: #aaa;
    
      opacity: 0;
      pointer-events: none;
      display: flex;
      justify-content: center;
      align-items: center;
    
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    
    #time-box.active {
      opacity: 1;
      transform: translate(-50%, 0);
    }
    
    #volumeControl {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    #volumeSlider {
      width: 150px;
    }
    
    .controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .audio-controls {
      position: fixed;
      bottom: 80px; /* ë³¼ë¥¨ ë°”ë³´ë‹¤ ìœ„ì— ìœ„ì¹˜í•˜ë„ë¡ ì¡°ì • */
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 15px;
      z-index: 1000;
      
      background-color: rgba(0, 0, 0, 0.7);
      padding: 10px 16px;
      border-radius: 12px;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }
    
    .audio-controls button {
      font-size: 20px;
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    
    .audio-controls button:hover {
      transform: scale(1.2);
    }

    .track-info-bar {
      position: fixed;;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(255, 255, 255, 0.95);
      padding: 12px 24px;
      color: #111;
      font-size: 18px;
      font-weight: bold;
      border-radius: 12px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease, transform 0.4s ease;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
      z-index: 9999;
    }
    
    .track-info-bar.active {
      opacity: 1;
      pointer-events: auto;
      transform: translateX(-50%) translateY(20px);
    }
    
    .hideable {
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    
    /* fade íš¨ê³¼ */
    .fade-in {
      opacity: 1;
      transform: translateX(0);
      pointer-events: auto;
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .fade-out {
      opacity: 0;
      pointer-events: none;
      transform: translateX(0); /* ê¸°ë³¸ìœ¼ë¡œ ì´ë™ì€ í•˜ì§€ ì•ŠìŒ */
      transition: opacity 0.5s ease, transform 0.5s ease;
    }

    /* ì™„ì „íˆ ìˆ¨ê¹€ (ì• ë‹ˆë©”ì´ì…˜ í›„ ì ìš©) */
    .hidden {
      display: none !important;
    }

    /* main-container ì´ë™ */
    .main-container.fade-out {
      transform: translateX(-50px);
    }
    .main-container.fade-in {
      transform: translateX(0);
    }

    /* playlist-column ì´ë™ */
    .playlist-column.fade-out {
      transform: translateX(50px);
    }
    .playlist-column.fade-in {
      transform: translateX(0);
    }

    #rotatingWrapper {
      position: fixed;
      top: calc(50% - 40px);
      left: 50%;
      transform: translate(-50%, -50%);
      width: 200px;
      height: 200px;
      display: none;
      z-index: 9999;
    }
    
    #rotatingIcon {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.4), inset 0 0 10px rgba(255, 255, 255, 0.2);
      border: 10px solid #111;
      background-color: #222;
      object-fit: cover;
    
      /* ì´ˆê¸°ì—ëŠ” transform ì—†ìŒ */
    }
    
    .rotating {
      animation: spin 5s linear infinite;
      animation-play-state: running;
    }
    
    .paused {
      animation-play-state: paused !important;
    }
    
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }

    #rotatingWrapper {
      transition: transform 0.3s ease;
    }
    
    #rotatingWrapper:hover {
      transform: translate(-50%, -50%) scale(1.1);
    }

    /* ì¬ìƒ ì¤‘ ë°” ê¸°ë³¸ ìƒíƒœ */
    #trackInfoBar {
      position: fixed;
      top: calc(50% + 120px); /* ëŒì•„ê°€ëŠ” ì´ë¯¸ì§€ ì•„ë˜ë¡œ */
      left: 50%;
      transform: translateX(-50%) translateY(-20px);
      background-color: rgba(0, 0, 0, 0.75);
      padding: 10px 20px;
      color: white;
      font-size: 18px;
      border-radius: 8px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease, transform 0.3s ease;
      z-index: 9999;
    }

    /* í™œì„±í™” ì‹œ ë‚˜íƒ€ë‚¨ */
    #trackInfoBar.active {
      opacity: 1;
      pointer-events: auto;
      transform: translateX(-50%) translateY(0);
    }

  </style>
</head>
<body>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- ì œëª© ì˜ì—­ -->
  <div class="header">
    <h1 id="playlist-title">Playlist</h1> <!-- ìƒë‹¨ íƒ€ì´í‹€ í…ìŠ¤íŠ¸ -->
  </div>

  <div class="hideable">
    <!-- ì¬ìƒ ì‹œê°„ í‘œì‹œ ì˜ì—­ -->
    <div id="time-box" class="time-box"> </div>
    <div id="clock-box" class="time-box"></div>

    <!-- ì „ì²´ ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="main-container">

      <!-- ì™¼ìª½: ì•„ì´ì½˜ ë°•ìŠ¤ êµ¬ì„± ì˜ì—­ -->
      <div class="icon-column-wrapper">

        <!-- ìƒë‹¨ ë°•ìŠ¤ ì œëª© ë° ì´ì „/ë‹¤ìŒ ë²„íŠ¼ -->
        <div class="icon-title-bar">
          <button class="arrow-button" id="prevBtn">â¬…ï¸</button> <!-- ì´ì „ ë°•ìŠ¤ë¡œ ì´ë™ -->
          <div class="icon-title" id="title">1ë²ˆ</div> <!-- í˜„ì¬ ë°•ìŠ¤ì˜ ì œëª© í‘œì‹œ -->
          <button class="arrow-button" id="nextBtn">â¡ï¸</button> <!-- ë‹¤ìŒ ë°•ìŠ¤ë¡œ ì´ë™ -->
        </div>

        <!-- ì•„ì´ì½˜(ë²„íŠ¼ ì´ë¯¸ì§€)ë“¤ì´ ìœ„ì¹˜í•  ê·¸ë¦¬ë“œ -->
        <div class="icon-grid" id="iconGrid">
          <!-- JavaScriptë¡œ ì´ë¯¸ì§€ ì•„ì´ì½˜ë“¤ì´ ì‚½ì…ë¨ -->
        </div>
      </div>

      <!-- ì˜¤ë¥¸ìª½: ê³ ì •ëœ Spotify í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ì˜ì—­ -->
      <div class="playlist-column">
        <!-- ê° iframeì€ Spotifyì—ì„œ ê³µìœ í•œ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ë¥¼ ì‚½ì… -->
        <iframe src="https://open.spotify.com/embed/playlist/0znvYX1Wd2KeE80lEfgYWU?si=be53610498df4771&utm_source=generator" 
          frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
          loading="lazy"></iframe>

        <iframe src="https://open.spotify.com/embed/playlist/1NpUHfTxcSsdIT1vNyXc1U?si=dedd3882dfd54eca&utm_source=generator" 
          frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
          loading="lazy"></iframe>

        <iframe src="https://open.spotify.com/embed/playlist/3GjnImUmFxBYnWwBho6SE8?si=68e7836172484ff2&utm_source=generator" 
          frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
          loading="lazy"></iframe>

        <iframe src="https://open.spotify.com/embed/playlist/59PXvtjDCzcCndx59QkiSH?si=13fc65aa3ee84e29&utm_source=generator" 
          frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
          loading="lazy"></iframe>
      </div>
    </div>

    <!-- ë³¼ë¥¨ ì¡°ì ˆ ìŠ¬ë¼ì´ë” -->
    <div class="volume-control" style="font-family: 'Maplestory', sans-serif; font-weight: bold;">
      ğŸ”‰ Volume: 
      <input type="range" id="volumeSlider" min="0.01" max="1" step="0.01" value="0.1">
      <!-- ìŠ¬ë¼ì´ë”ë¥¼ ì›€ì§ì´ë©´ JavaScriptì—ì„œ ë³¼ë¥¨ì´ ì¡°ì •ë¨ -->
    </div>

    <!-- ì˜¤ë””ì˜¤ ì¬ìƒì„ ìœ„í•œ audio ìš”ì†Œ (ë³´ì´ì§€ ì•ŠìŒ) -->
    <audio id="myAudio"></audio>

    <!-- ê³¡ ì´ë¦„ í‘œì‹œ ë°” -->
    <div id="trackInfoBar" class="track-info-bar">ì¬ìƒ ì¤‘: ì—†ìŒ</div>

    <div class="audio-controls">
      <button id="playPauseBtn">â–¶ï¸</button>   <!-- ì¬ìƒ/ì¼ì‹œì •ì§€ ë²„íŠ¼ -->
      <button id="stopBtn">â¹ï¸</button>        <!-- ì •ì§€ ë²„íŠ¼ -->
      <button id="loopBtn">ğŸ”</button>        <!-- ë£¨í”„ ì¬ìƒ ë²„íŠ¼ -->
      <button id="shuffleBtn">ğŸ²</button>     <!-- ì…”í”Œ ì¬ìƒ ë²„íŠ¼ -->
      <button id="autoShuffleBtn">â™¾ï¸</button> <!-- ìë™ ëœë¤ ì¬ìƒ -->
    </div>
  </div>

  <!-- ì´ë¯¸ì§€ íšŒì „ìš© êµ¬ì¡° -->
  <div id="rotatingWrapper">
    <img id="rotatingIcon" src="" alt="Album Art" />
  </div>

  <script>
    
    // HTML ìš”ì†Œë“¤ì„ ê°€ì ¸ì˜´
    const audio = document.getElementById('myAudio');           // ì˜¤ë””ì˜¤ ê°ì²´
    const iconGrid = document.getElementById('iconGrid');       // ì‚¬ìš´ë“œ ë²„íŠ¼ ì´ë¯¸ì§€ê°€ ë“¤ì–´ê°ˆ ê·¸ë¦¬ë“œ ì˜ì—­
    const title = document.getElementById('title');             // í˜„ì¬ ë°•ìŠ¤ì˜ íƒ€ì´í‹€ í‘œì‹œ ì˜ì—­
    const volumeSlider = document.getElementById('volumeSlider'); // ë³¼ë¥¨ ìŠ¬ë¼ì´ë”
    const playPauseBtn = document.getElementById('playPauseBtn'); // ì¬ìƒ/ì¼ì‹œì •ì§€ ë²„íŠ¼
    const stopBtn = document.getElementById('stopBtn');           // ì •ì§€ ë²„íŠ¼
    const loopBtn = document.getElementById('loopBtn');           // ë°˜ë³µì¬ìƒ ë²„íŠ¼
    const shuffleBtn = document.getElementById('shuffleBtn');     // ëœë¤ì¬ìƒ ë²„íŠ¼
    const timeBox = document.getElementById('time-box');     // ì˜¤ë””ì˜¤ ì¬ìƒ ì‹œê°„ ë°•ìŠ¤
    const clockBox = document.getElementById('clock-box');   // í˜„ì¬ ì‹œê° ë°•ìŠ¤

    // ì´ˆê¸° ë³¼ë¥¨ ì„¤ì •
    audio.volume = parseFloat(volumeSlider.value);

    // ë³¼ë¥¨ ìŠ¬ë¼ì´ë” ë³€í™” ê°ì§€í•˜ì—¬ ì˜¤ë””ì˜¤ ë³¼ë¥¨ ë°˜ì˜
    volumeSlider.addEventListener('input', () => {
      audio.volume = parseFloat(volumeSlider.value);
    });

    // í˜„ì¬ ë°•ìŠ¤ ì¸ë±ìŠ¤ (ì²˜ìŒì€ 0ë²ˆ)
    let currentIndex = 0;

    // í˜„ì¬ ì¬ìƒ ì¤‘ì¸ ì‚¬ìš´ë“œ ì¸ë±ìŠ¤ (-1ì€ ì¬ìƒ ì¤‘ ì•„ë‹˜)
    let currentSoundIndex = -1;

    // ì‚¬ìš´ë“œì™€ ì´ë¯¸ì§€ ë°ì´í„°
    const data = [
      {
        title: '1ë²ˆ',
        sounds: ['sounds/1-1.mp3', 'sounds/1-2.mp3', 'sounds/1-3.mp3', 'sounds/1-4.mp3', 'sounds/1-5.mp3', 'sounds/1-6.mp3'],
        images: ['images/1-1.png', 'images/1-2.png', 'images/1-3.png', 'images/1-4.png', 'images/1-5.png', 'images/1-6.png']
      },
      {
        title: '2ë²ˆ',
        sounds: ['sounds/2-1.mp3', 'sounds/2-2.mp3', 'sounds/2-3.mp3', 'sounds/2-4.mp3', 'sounds/2-5.mp3', 'sounds/2-6.mp3'],
        images: ['images/2-1.png', 'images/2-2.png', 'images/2-3.png', 'images/2-4.png', 'images/2-5.png', 'images/2-6.png']
      },
      {
        title: '3ë²ˆ',
        sounds: ['sounds/3-1.mp3', 'sounds/3-2.mp3', 'sounds/3-3.mp3', 'sounds/3-4.mp3', 'sounds/3-5.mp3', 'sounds/3-6.mp3'],
        images: ['images/3-1.png', 'images/3-2.png', 'images/3-3.png', 'images/3-4.png', 'images/3-5.png', 'images/3-6.png']
      },
      {
        title: '4ë²ˆ',
        sounds: ['sounds/4-1.mp3', 'sounds/4-2.mp3', 'sounds/4-3.mp3', 'sounds/4-4.mp3', 'sounds/4-5.mp3', 'sounds/4-6.mp3'],
        images: ['images/4-1.png', 'images/4-2.png', 'images/4-3.png', 'images/4-4.png', 'images/4-5.png', 'images/4-6.png']
      },
      {
        title: '5ë²ˆ',
        sounds: ['sounds/5-1.mp3', 'sounds/5-2.mp3', 'sounds/5-3.mp3', 'sounds/5-4.mp3', 'sounds/5-5.mp3', 'sounds/5-6.mp3'],
        images: ['images/5-1.png', 'images/5-2.png', 'images/5-3.png', 'images/5-4.png', 'images/5-5.png', 'images/5-6.png']
      }
    ];

    // ì•„ì´ì½˜ ë° íƒ€ì´í‹€ ë¡œë“œ í•¨ìˆ˜
    function loadBox(index) {
      const box = data[index]; // ì„ íƒëœ ë°•ìŠ¤ ì •ë³´
      title.textContent = box.title; // ì œëª© í‘œì‹œ
      iconGrid.innerHTML = ''; // ê¸°ì¡´ ì•„ì´ì½˜ ì œê±°

      // ê° ì‚¬ìš´ë“œì— ëŒ€í•´ ì´ë¯¸ì§€ ë²„íŠ¼ ìƒì„±
      box.sounds.forEach((sound, i) => {
        const img = document.createElement('img');
        img.src = box.images[i]; // ì´ë¯¸ì§€ ì„¤ì •

        // ì´ë¯¸ì§€ ë¡œë”© ì‹¤íŒ¨ ì‹œ ëŒ€ì²´ ì´ë¯¸ì§€
        img.onerror = function () {
          img.src = 'images/missing.png';
        };

        img.className = 'playButton'; // í´ë˜ìŠ¤ ì„¤ì •
        img.addEventListener('click', () => {
          playSound(sound);      // í´ë¦­ ì‹œ í•´ë‹¹ ì‚¬ìš´ë“œ ì¬ìƒ
          currentSoundIndex = i; // í˜„ì¬ ì¬ìƒ ì¸ë±ìŠ¤ ì €ì¥
        });

        iconGrid.appendChild(img); // ê·¸ë¦¬ë“œì— ì´ë¯¸ì§€ ì¶”ê°€
      });
    }
    loadBox(currentIndex); // ì´ˆê¸° ë°•ìŠ¤ ë¡œë“œ

    // ì´ì „ ë²„íŠ¼ í´ë¦­ ì‹œ ì´ì „ ë°•ìŠ¤ë¡œ ì´ë™
    document.getElementById('prevBtn').addEventListener('click', () => {
      currentIndex = (currentIndex - 1 + data.length) % data.length; // ì¸ë±ìŠ¤ ê°ì†Œ, ìˆœí™˜
      loadBox(currentIndex);
    });

    // ë‹¤ìŒ ë²„íŠ¼ í´ë¦­ ì‹œ ë‹¤ìŒ ë°•ìŠ¤ë¡œ ì´ë™
    document.getElementById('nextBtn').addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % data.length; // ì¸ë±ìŠ¤ ì¦ê°€, ìˆœí™˜
      loadBox(currentIndex);
    });
    
    // ì „ì—­ì—ì„œ í˜„ì¬ ì¬ìƒ ì¤‘ì¸ íŠ¸ë™ ê²½ë¡œë¥¼ ì¶”ì 
    let currentTrackSrc = null;

    let isStopped = false; // ì „ì—­ì—ì„œ ì„ ì–¸ í•„ìš”!

    stopBtn.addEventListener('click', () => {
      playSound('sounds/missing.mp3');
    
      // ì´ë¯¸ì§€ ì„¤ì •
      rotatingIcon.src = 'images/missing.png';
      rotatingIcon.classList.remove('rotating', 'paused');
      document.getElementById('rotatingWrapper').style.display = 'block';
    
      playPauseBtn.textContent = 'â¸ï¸';
    });

    // ì¬ìƒ ë²„íŠ¼ ë™ì‘
    playPauseBtn.addEventListener('click', () => {
      // âœ… í˜„ì¬ ì¬ìƒ ì¤‘ì¸ íŠ¸ë™ì´ ì—†ìœ¼ë©´ ì¬ìƒí•˜ì§€ ì•ŠìŒ
      if (!currentTrackSrc) {
        console.warn('ğŸµ ì¬ìƒí•  íŠ¸ë™ì´ ì—†ìŠµë‹ˆë‹¤.');
        return;
      }

      if (audio.paused) {
        audio.play();
        playPauseBtn.textContent = 'â¸ï¸';
        rotatingIcon.classList.remove('paused');
        rotatingIcon.classList.add('rotating');
      } else {
        audio.pause();
        playPauseBtn.textContent = 'â–¶ï¸';
        rotatingIcon.classList.add('paused');
      }
    });
    
    function showMissingIcon() {
      const wrapper = document.getElementById('rotatingWrapper');
      wrapper.style.display = 'block';
    
      rotatingIcon.classList.remove('rotating', 'paused'); // íšŒì „ ë©ˆì¶¤
      rotatingIcon.src = 'images/missing.png'; // missing ì´ë¯¸ì§€ë¡œ êµì²´
    }

    // ë£¨í”„ ë²„íŠ¼
    loopBtn.addEventListener('click', () => {
      audio.loop = !audio.loop;
      loopBtn.style.color = audio.loop ? 'yellow' : 'white';
      loopBtn.textContent = audio.loop ? 'ğŸ”‚' : 'ğŸ”';
    });

    // ì…”í”Œ ë²„íŠ¼
    shuffleBtn.addEventListener('click', () => {
      const validSounds = getValidSounds();
    
      if (validSounds.length === 0) {
        console.warn('ğŸ² ì…”í”Œ ê°€ëŠ¥í•œ ê³¡ì´ ì—†ìŠµë‹ˆë‹¤!');
        return;
      }
    
      const randomIndex = Math.floor(Math.random() * validSounds.length);
      const randomSoundPath = validSounds[randomIndex];
      playSound(randomSoundPath);
    });

    // ì¬ìƒ/ì¼ì‹œì •ì§€ ìƒíƒœ ìë™ ë°˜ì˜
    audio.addEventListener('play', () => {
      playPauseBtn.textContent = 'â¸ï¸';
      showRotatingIcon();
    });

    audio.addEventListener('pause', () => {
      if (!audio.ended && audio.currentTime > 0) {
        pauseRotatingIcon(); // ì¼ì‹œì •ì§€ì¼ ë•Œë§Œ íšŒì „ ë©ˆì¶”ê¸°
      }
    });

    // ì˜¤ë””ì˜¤ ì¬ìƒ ì‹œê°„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateTimeText() {
      const current = formatTime(audio.currentTime);
      const duration = formatTime(audio.duration || 0);
      timeBox.textContent = `${current} / ${duration}`;
    }

    // ë‚ ì§œ + ì‹œê°„ í‘œì‹œ: MMì›” DDì¼ HH:MM:SS
    function updateClockText() {
      const now = new Date();

      const month = (now.getMonth() + 1).toString().padStart(2, '0'); // getMonthëŠ” 0ë¶€í„° ì‹œì‘
      const date = now.getDate().toString().padStart(2, '0');
      const hour = now.getHours().toString().padStart(2, '0');
      const min = now.getMinutes().toString().padStart(2, '0');
      const sec = now.getSeconds().toString().padStart(2, '0');

      clockBox.textContent = `${month}ì›” ${date}ì¼ ${hour}:${min}:${sec}`;
    }

    // í˜„ì¬ ì‹œê°„ì€ í•­ìƒ ì—…ë°ì´íŠ¸
    setInterval(updateClockText, 1000);

    // ì²˜ìŒ ë¡œë“œë˜ì—ˆì„ ë•Œë„ ì¦‰ì‹œ ë³´ì´ê²Œ
    function showClockBox() {
      clockBox.classList.add('active');
      updateClockText();
    }

    // ì˜¤ë””ì˜¤ ì¬ìƒ ì¤‘ì¼ ë•Œë§Œ ì‹œê°„ í…ìŠ¤íŠ¸ ê°±ì‹ 
    setInterval(() => {
      if (!audio.paused && !audio.ended) {
        updateTimeText();
      }
    }, 500);

    // í˜„ì¬ ì‹œê°„ì€ í•­ìƒ ì—…ë°ì´íŠ¸
    setInterval(updateClockText, 1000);

    // ì˜¤ë””ì˜¤ ì¬ìƒ ì‹œê°„ ë°•ìŠ¤ í‘œì‹œ
    function updateTimeBox() {
      timeBox.classList.add('active');
      updateTimeText();
    }

    // í˜„ì¬ ì‹œê³„ ë°•ìŠ¤ í‘œì‹œ
    function showClockBox() {
      clockBox.classList.add('active');
      updateClockText();
    }

    // ì´ˆê¸° ì‹¤í–‰
    updateTimeBox();

    // ì‹œê°„ í˜•ì‹ í•¨ìˆ˜ (mm:ss)
    function formatTime(seconds) {
      const min = Math.floor(seconds / 60);
      const sec = Math.floor(seconds % 60);
      return `${min}:${sec.toString().padStart(2, '0')}`;
    }

    const playlistTitle = document.getElementById('playlist-title');
    const trackInfoBar = document.getElementById('trackInfoBar');

    // ê³¡ëª… ë°” í´ë¦­ ì‹œ ë‹«í˜
    trackInfoBar.addEventListener('click', () => {
      trackInfoBar.classList.remove('active');
    });

    const trackNames = {
      "1-1.mp3": "Everything",
      "1-2.mp3": "ì€ë°©ìš¸",
      "1-3.mp3": "Here with me",
      "1-4.mp3": "Come back with me",
      "1-5.mp3": "ì†Œë‚˜ê¸°",
      "1-6.mp3": "I belive",
      "2-1.mp3": "Just the two of us",
      "2-2.mp3": "Missing",
      "2-3.mp3": "Missing",
      "2-4.mp3": "Missing",
      "2-5.mp3": "Missing",
      "2-6.mp3": "Missing",
      "3-1.mp3": "Missing",
      "3-2.mp3": "Missing",
      "3-3.mp3": "Missing",
      "3-4.mp3": "Missing",
      "3-5.mp3": "Missing",
      "3-6.mp3": "Missing",
      "4-1.mp3": "Missing",
      "4-2.mp3": "Missing",
      "4-3.mp3": "Missing",
      "4-4.mp3": "Missing",
      "4-5.mp3": "Missing",
      "4-6.mp3": "Missing",
      "5-1.mp3": "Feels",
      "5-2.mp3": "ì˜¨ë¦¬ì›",
      "5-3.mp3": "ì–´ë• ì„ê¹Œ",
      "5-4.mp3": "Galaxy",
      "5-5.mp3": "ë¯¸ì¹˜ê²Œ í•´",
      "5-6.mp3": "ë‹¤ë¼ë¦¬ë¦¬",
      "missing.mp3": "ì—†ìŒ",
    }; 

    const mainContainer = document.querySelector('.main-container');
    const playlistColumn = document.querySelector('.playlist-column');
    let hidden = false;

    const fadeIn = (element) => {
      const originalDisplay = element.dataset.originalDisplay || getComputedStyle(element).display;
      element.style.display = originalDisplay === 'none' ? 'block' : originalDisplay;
      element.classList.remove('fade-out');
      element.classList.add('fade-in');
    };

    const fadeOut = (element) => {
      element.dataset.originalDisplay = getComputedStyle(element).display;
      element.classList.remove('fade-in');
      element.classList.add('fade-out');
      setTimeout(() => {
        if (element.classList.contains('fade-out')) {
          element.style.display = 'none';
        }
      }, 500);
    };

    // f í‚¤ë¥¼ ëˆŒë €ì„ ë•Œ í† ê¸€
    document.addEventListener('keydown', (e) => {
      if (e.key.toLowerCase() === 'f') {
        if (!hidden) {
          // ğŸ‘‰ clockBoxê°€ ì¼œì ¸ ìˆì—ˆëŠ”ì§€ ê¸°ì–µí•´ë‘ 
          wasClockVisibleBeforeHide = clockBox.classList.contains('active');
    
          fadeOut(mainContainer);
          fadeOut(playlistColumn);
    
          if (wasClockVisibleBeforeHide) {
            clockBox.classList.remove('active');
          }
    
          hidden = true;
        } else {
          fadeIn(mainContainer);
          fadeIn(playlistColumn);
    
          // ğŸ‘‰ clockBoxê°€ ì›ë˜ ì¼œì ¸ ìˆì—ˆìœ¼ë©´ ë‹¤ì‹œ ë³´ì—¬ì¤Œ
          if (wasClockVisibleBeforeHide) {
            clockBox.classList.add('active');
          }
    
          hidden = false;
        }
      }
    });

    // ì´ˆê¸° ì§„ì… ì‹œ í‘œì‹œ
    window.addEventListener('DOMContentLoaded', () => {
      mainContainer.classList.add('fade-in');
      playlistColumn.classList.add('fade-in');
    });

    const rotatingWrapper = document.getElementById('rotatingWrapper');
    const rotatingIcon = document.getElementById('rotatingIcon');

    function showRotatingIcon() {
      rotatingIcon.classList.remove('paused');
      rotatingIcon.classList.add('rotating');
      document.getElementById('rotatingWrapper').style.display = 'block';
    }

    function pauseRotatingIcon() {
      rotatingIcon.classList.add('paused');
    }
    
    function hideRotatingIcon() {
      const wrapper = document.getElementById('rotatingWrapper');
      wrapper.style.display = 'none'; // ì•„ì˜ˆ ìˆ¨ê¸°ê¸°
    
      rotatingIcon.classList.remove('rotating', 'paused');
    }   

    function updateRotatingIcon(source) {
      const fileName = source.split('/').pop().replace('.mp3', '');
      const imagePath = `images/${fileName}.png`;
    
      console.log("ğŸ”Š ì¬ìƒëœ ì†ŒìŠ¤:", source);
      console.log("ğŸ“ íŒŒì‹±ëœ íŒŒì¼ëª…:", fileName);
      console.log("ğŸ–¼ï¸ ì´ë¯¸ì§€ ê²½ë¡œ:", imagePath);
    
      rotatingIcon.src = imagePath;
    }

    function playSound(src) {
      const fileName = src.split('/').pop().trim();
      const displayName = trackNames[fileName] || "ì—†ìŒ";
      currentTrackSrc = src; // í˜„ì¬ íŠ¸ë™ ì €ì¥
    
      // ì˜¤ë””ì˜¤ ì„¤ì • ë° ì¬ìƒ
      audio.pause();
      audio.currentTime = 0;
      audio.src = src;
    
      audio.play().then(() => {
        trackInfoBar.textContent = `ì¬ìƒ ì¤‘: ${displayName}`;
      }).catch((err) => {
        console.error("ì¬ìƒ ì˜¤ë¥˜:", err);
        trackInfoBar.textContent = "ì¬ìƒ ì¤‘: ì—†ìŒ";
      });
    
      updateTimeBox();
      updateRotatingIcon(src);
      showRotatingIcon();
    }    

    rotatingIcon.onerror = function () {
      rotatingIcon.src = 'images/missing.png';
    };

    console.log(audio.src);  // í˜„ì¬ ì¬ìƒ ì¤‘ íŒŒì¼ ì „ì²´ ê²½ë¡œ
    console.log(audio.src.split('/').pop().trim());  // íŒŒì¼ëª…ë§Œ ì¶”ì¶œ

    let autoShuffle = false;

    document.getElementById('autoShuffleBtn').addEventListener('click', () => {
      autoShuffle = !autoShuffle;
    
      const btn = document.getElementById('autoShuffleBtn');
      btn.style.color = autoShuffle ? 'lime' : 'white';
      btn.textContent = autoShuffle ? 'âœ…' : 'â™¾ï¸';
    
      if (autoShuffle) {
        playRandomTrack();
      }
    });
    
    // ê³¡ ì¢…ë£Œ ì‹œ ìë™ ì¬ìƒ
    audio.addEventListener('ended', () => {
      if (autoShuffle) {
        playRandomTrack();
      }
    });

    // ëœë¤ ì¬ìƒ ê°€ëŠ¥í•œ ê³¡ ë¦¬ìŠ¤íŠ¸
    function getValidSounds() {
      return data.flatMap(box => box.sounds).filter(sound => {
        const fileName = sound.split('/').pop();
        return trackNames[fileName] && !fileName.includes('missing');
      });
    }

    // ëœë¤ ê³¡ ì¬ìƒ í•¨ìˆ˜
    function playRandomTrack() {
      const validSounds = getValidSounds();
      if (validSounds.length === 0) {
        console.warn('ì¬ìƒ ê°€ëŠ¥í•œ ê³¡ì´ ì—†ìŠµë‹ˆë‹¤!');
        return;
      }

      const randomIndex = Math.floor(Math.random() * validSounds.length);
      const randomSoundPath = validSounds[randomIndex];
      playSound(randomSoundPath);
    }

    // ê³¡ì´ ëë‚¬ì„ ë•Œ ìë™ ë‹¤ìŒ ê³¡ ì¬ìƒ
    audio.addEventListener('ended', () => {
      if (autoShuffle) {
        playRandomTrack();
      }
    });

    // íšŒì „ ì´ë¯¸ì§€ í´ë¦­ ì‹œ ì¬ìƒì¤‘ ë°” í† ê¸€
    rotatingWrapper.addEventListener('click', () => {
      trackInfoBar.classList.toggle('active');
    });

    // ì¬ìƒì¤‘ ë°” í´ë¦­ ì‹œ ì‚¬ë¼ì§€ê²Œ
    trackInfoBar.addEventListener('click', () => {
      trackInfoBar.classList.remove('active');
    });

    rotatingWrapper.style.display = 'block';
    
    let isClockVisible = false;

    playlistTitle.addEventListener('click', () => {
      if (isClockVisible) {
        clockBox.classList.remove('active');
      } else {
        clockBox.classList.add('active');
      }
      isClockVisible = !isClockVisible;
    });

    clockBox.addEventListener('click', () => {
      clockBox.classList.remove('active');
      isClockVisible = false;
    });

    let wasClockVisibleBeforeHide = false;

  </script>
</body>
</html>
